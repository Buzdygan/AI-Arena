\documentclass[licencjacka]{pracamgr}

\usepackage{polski}
\usepackage[latin2]{inputenc}
\usepackage{graphicx}


\author{Jakub Tla³ka}
\nralbumu{292665}
%\author{Micha³ Kawiak}
%\nralbumu{277558}
%\author{Szymon Majewski}
%\nralbumu{277556}
%\author{Karol ¯ebrowski}
%\nralbumu{277580}

\title{Implementacja systemu AI-Arena}
\tytulang{Implementation of AI-Arena system}

\kierunek{Informatyka}

\opiekun{dra. Janusza Jab³onowskiego\\
  Wydzia{\l} Matematyki Informatyki i Mechaniki\\
  }
  
\date{Maj 2012}

\dziedzina{ 
11.3 Informatyka\\ 
}


\klasyfikacja{D. Software \\
D.0. General\\}


\keywords{programy walczace, arena, sztuczna inteligencja}
 
\newtheorem{defi}{Definicja}[section]

\begin{document}
\maketitle

\begin{abstract}
W pracy przedstawiono implementacje systemu AI-Arena,
 s{\l}u{\.z}acego do przeprowadzania turniejow programow walczacych.
\end{abstract}

\tableofcontents

\chapter{Metodologia Pracy}
    Podczas pracy nad systemem AI-Arena stosowali¶my pewn± modyfikacjê metodologii Scrum.
    Jest to metodologia typu lekkiego. Dzieli okres pracy na krótsze podokresy nazywane sprintami.
    Podczas ka¿dego takiego sprintu, realizowany jest jaki¶ skoñczony kawa³ek funkcjonalno¶ci.
    Sprinty nie powinny trwaæ d³u¿ej ni¿ dwa, trzy tygodnie. W naszym przypadku by³ to tydzieñ
    miêdzy kolejnymi spotkaniami na zajêciach z prowadz±cym. Podczas takich zajêæ, ustalany
    by³ zakres pracy przydzielony poszczególnym osobom na przysz³y tydzieñ, oraz weryfikowana
    by³a praca wykonana w tygodniu poprzednim. Prowadz±cy zg³asza³ uwagi do niektórych funkcjonalno¶ci.
    Dyskutowane by³y równie¿ dokumenty powstaj±ce przy okazji pracy nad projektem, przede wszystkim
    poni¿sza praca licencjacka. Zapis przebiegu zajêæ, wraz z celami na przysz³y tydzieñ, nazywany
    by³ minutkami i trzymany w Google Documents, tak by ka¿dy z cz³onków zespo³u oraz prowadz±cy
    zajêæ mia³ do niego dostêp.\\
    Dodatkowo organizowane by³y spotkania samego zespo³u. Odbywa³y siê one równie¿ raz w tygodniu
    i mia³y na celu kontrolowanie przebiegu prac i zadbanie o to by zosta³y wykonane zaplanowane
    zadania. Spotkania odbywa³y siê na wydziale, b±d¼ jako konferencje video z wykorzystaniem Google Hangouts.
    Ich przebieg nadzorowa³ Lider Projektu, który by³ odpowiedzialny równie¿ za realizowanie
    za³o¿eñ przyjêtej metodologii pracy.\\
    Do bie¿±cej kontroli stanu projektu u¿yty zosta³ system Redmine. Umo¿liwia on tworzenie
    zadañ i przydzielanie ich cz³onkom zespo³u. Ka¿de zadanie ma status, który zawiera siê w zbiorze
    (otwarte, przydzielone, zrealizowane, zamkniête). Stan otwarty oznacza, ¿e zadanie nie jest
    jeszcze przydzielone konkretnej osobie. Stan przydzielone oznacza, ¿e zadanie jest przydzielona,
    a osoba odpowiedzialna za jego wykonanie jest w trakcie jego realizacji. Stan zrealizowane
    oznacza, ¿e zadanie zosta³o wykonane przez osobê odpowiedzialn±, ale nie zosta³o jeszcze
    zweryfikowane pod k±tem poprawno¶ci. Stan zamkniête oznacza, ¿e zadanie zosta³o zrealizowane
    i zweryfikowane.\\
    Kod projektu, oraz dokumenty takie jak praca licencjacka, zosta³y umieszczone w repozytorium Gita.
    Git to system kontroli wersji dbaj±cy o archiwizacjê kodu oraz koordynacjê równoleg³ych zmian
    wszystkich cz³onków zespo³u. Repozytorium jest publiczne i dostêpne online w serwisie GitHub.
\chapter{Wprowadzenie}
\addcontentsline{toc}{chapter}{Wprowadzenie}
System Ai-Arena s³u¿y do przeprowadzania rozgrywek i turniejów ró¿nych gier pomiêdzy programami komputerowymi. System ma w zamierzeniu twórców s³u¿yæ osobom zainteresowanym sztuczn± inteligencj± do sprawdzenia swoich umiejêtno¶ci, lub jako pomoc przy badaniach nad sztuczn± inteligencj±.

Praca sk³ada siê z piêciu rozdzia³ów. Pierwszy zawiera opis architektury systemu. W drugim rozdziale zawarto dokumentacjê u¿ytkownika systemu i szczegó³y implementacji. Rozdzia³ trzeci zawiera podsumowanie, rozdzia³ czwart podzia³ prac a rozdzia³ pi±ty spis p³yty do³±czonej do pracy.

\chapter{Podstawowe pojêcia}

\section{Gra}
    
    Gra sk³ada siê z Regu³ i Sêdziego. \\
    Regu³y okre¶laj± stan pocz±tkowy, dostêpne graczom ruchy oraz warunki zwyciêstwa, przegranej, b±d¼ remisu. \\
    Powinny ¶ci¶le okre¶laæ Protokó³ Komunikacji miêdzy Programami Walcz±cymi, a Sêdzi±.
    Gra powinna byæ co najmniej dwuosobowa. \\
    W warunkach serwisu AI-Arena graczami bêd± najczê¶ciej programy komputerowe,
    nazywane Botami b±d¼ Programami Walcz±cymi. \\
    Sêdzia to program kontroluj±cy przebieg rozgrywki. Ma za zadanie:
    \begin{itemize}
    \item wyznaczyæ stan pocz±tkowy ka¿dej rozgrywki 
    \item Odbieraæ komunikaty od programów graj±cych, sygnalizujace ich zagrania
    \item Kontrolowaæ poprawno¶æ zagrañ graczy, oraz uaktualniaæ stan rozgrywki
    \item Informowaæ Graczy o obecnym stanie rozgrywki
    \item Rozstrzygaæ czy gra siê zakoñczy³a i przydzielaæ punkty zwyciêstwa graczom.
    \end{itemize}

\section{Konkurs}

    Konkurs mo¿e mieæ okre¶lon± datê zakoñczenia, b±d¼ byæ tzw konkursem sta³ym, w którym nie ma ostatecznego
    terminu wysy³ania rozwi±zañ. Dla ka¿dego konkursu tworzony jest ranking, b±d¼ drabinka rozgrywek.
    Okre¶laj± one kolejno¶æ botów, w szczególno¶ci zwyciêzcê, b±d¼ aktualnego lidera konkursu.
    W przypadku konkursu sta³ego istnieje ranking, który jest posortowany po sumie zdobytych przez bota
    punktów w meczach, przy czym ka¿dy bot powinien mieæ tê sam± liczbê rozegranych meczy.

\section{Program Walcz±cy - Bot}

    Jest to program napisany w jednym z obs³ugiwanych przez jêzyk serwisów.
    Musi byæ przypisany do konkretnej Gry dostêpnej w serwisie.
    Uczestniczy w rozgrywkach (Meczach) z innymi botami przypisanymi do tej Gry.
    Ma za zadanie przetwarzaæ informacje o dotychczasowym przebiegu rozgrywki
    i produkowaæ kolejne posuniêcia, zgodne z regu³ami Gry.

    


\chapter{Zastosowania w nauce i biznesie}

    Sztuczna inteligencja jest jedn± z szybciej rozwijaj±cych siê obecnie dziedzin.
    Zastosowania algorytmów SI siêgaj± prawie wszystkich obszarów nie tylko
    internetu, ale i codziennego ¿ycia. Serwis AI-Arena pomaga rozwijaæ ga³±¼ tej nauki
    zwi±zan± z rywalizacj±.\\

    Najprostsze przyk³ady rywalizacji to oczywi¶cie wszelkiego
    rodzaju gry i sporty. Obecnie komputery s± w stanie wygrywaæ z cz³owiekiem w
    wiêkszo¶ci gier takich jak szachy, warcaby itp. Coraz bardziej zaawansowani staj± siê przeciwnicy kierowani przez
    komputer w grach video. Równie¿ w sporcie zaczêto doceniaæ znaczenie metod naukowych
    do opracowywania optymalnych strategii. Prawdopodobnie kwesti± czasu jest analizowanie
    gry wirtualnych zespo³ów kierowanych sztuczn± inteligencj±, a nastêpnie wykorzystywanie
    obserwacji do poprawy gry prawdziwej dru¿yny.\\

    Rywalizacja mo¿e byæ wykorzystana równie¿ jako metoda rozwi±zywania problemów.
    Przyk³adem takiego podej¶cia s± algorytmy genetyczne, w których najlepsze jednostki
    pozostaj± w obiegu, ca³y czas udoskanalaj±c swoje podej¶cie do rozwi±zywania danego problemu.\\
    
    Serwis AI-Arena ma du¿e zastosowanie w biznesie. Firmy nieustannie rywalizuj± miêdzy sob± w walce
    o klienta. Serwis umo¿liwia symulowanie takiej rywalizacji i dziêki temu odkrywanie skutecznych
    algorytmów sztucznej inteligencji, które bêd± podejmowa³y decyzje decyduj±ce o sukcesie
    wykorzystuj±cej je firmy.\\

    Innym przyk³adem zastosowania AI-Arena s± dzia³ania wojenne. Serwis mo¿e pomóæ w szukaniu
    algorytmów, które bêd± potrafi³y adaptowaæ siê do ró¿nych warunków i w zale¿no¶ci od nich
    sugerowaæ najlepsze strategie i taktyki w walce z przeciwnikiem.

\chapter{Podobne platformy}

Obecnie istniej± serwisy internetowe podobne do Ai-Arena. Oto kilka z nich:

\section{Top Coder}

    Bardzo popularny serwis organizuj±cy ró¿nego rodzaju konkursy programistyczne.
    Jednym z nich s± tzw Marathon Matche, podczas których uczestnicy wysy³aj±
    programy, które staraj± siê najbardziej optymalnie rozwi±zaæ dany problem, przy czym
    nie istnieje rozwi±zanie ca³kowicie optymalne.

\section{Ai Challenge}

    Serwis organizuj±cy w sposób cykliczny zawody dla programów walcz±cych. Najczê¶ciej
    ok 2 konkursy rocznie. Ka¿dy konkurs ma okre¶lony czas trwania i nie mo¿na w nim
    uczestniczyæ po jego zakoñczeniu.

\section{SIO}

    Projekt od lat wykorzystywany do organizowania konkursów algorytmicznych, w szczególno¶ci
    polskiej Olimpiady Informatycznej, ale te¿ Miêdzynarodowej Olimpiady Informatycznej.
    Jest to framework, który mo¿na wykorzystywaæ równie¿ w wersji lokalnej, nie tylko
    jako serwis internetowy. 

\section{SPOJ}

    Serwis zawieraj±cy du¿± bazê zadañ algorytmicznych dostêpnych do rozwi±zywania u¿ytkownikom.
    Zadania nie maj± okre¶lonego terminu rozwi±zywania. Istnieje ranking bior±cy pod uwagê
    liczbê wszystkich rozwi±zanych przez u¿ytkowników zadañ.

\section{MAIN}
    
    Posiada du¿± bazê zadañ z olimpiad informatycznych, ale tak¿e kursy
    umo¿liwiaj±ce pog³êbienie wiedzy algorytmicznej.


\section{Tabela porównuj±ca serwisy}

\footnotesize
\begin{tabular}{|c|c|c|c|c|}
\hline
       & Top Coder & Ai Challenge & SPOJ & AI-Arena \\ \hline
Tematyka & algorytmy & programy walcz±ce & algorytmika & programy walcz±ce \\
& problemy optymalizacyjne & & & \\ \hline
Typ konkursów & okresowe & okresowe & sta³e/okresowe & sta³e/okresowe \\ \hline
Ró¿norodno¶æ & regularne i czêste & konkurs co pó³ roku & du¿a baza zadañ & baza gier modyfikowana \\
 & konkursy w ró¿nych & & & przez u¿ytkowników \\
 & kategoriach & & & \\ \hline
\end{tabular}



\chapter{Metodyka Scrum}

\chapter{Architektura systemu}

Na serwis AI-Arena sk³adaj± siê trzy wartwy: nadzorcy, schedulera i serwisu webowego.

\section{Nadzorca}
Nadzorca jest j±drem serwisu AI-Arena.
Warstwa nadzorcy jest odpowiedzialna za uruchamianie rozgrywek pomiêdzy wybranymi graczami,
zbieranie informacji o ich wynikach i przekazywnie ich do warstwy schedulera.
Nadzorca jest skryptem napisanym w pythonie, którego najwa¿niejsz± czê¶ci± jest metoda play.
Metoda ta przyjmuje jako argumenty uruchamialne pliki sêdziego i programów graj±cych, oraz limity czasowy i pamiêciowy dla ka¿dego programu graj±cego.
Nastêpnie metoda play przeprowadza odpowiedni± rozgrywkê, zwracaj±c jako wynik s³ownik zawieraj±cy:
\begin{itemize}
    \item Ci±g liczb oznaczaj±cy przydzielone przez sedziego punkty za rozgrywkê
    \item Informacje na temat przebiegu rozgrywki
    \item Czas jaki zu¿y³y programy walcz±ce
    \item Pamiêæ RAM jak± wykorzystywa³y programy walcz±ce
\end{itemize}

Rozgrywka zaczyna siê przez uruchomienie programów walcz±cych, oraz sêdziego, kontroluj±cego przebieg rozgrywki.
Komunikacja miêdzy sêdzi± a poszczególnymi programami odbywa siê za po¶rednictwem nadzorcy, który odczytuje
komunikaty ze standardowego wyj¶cia programów i wypisuje informacje zwrotne na ich standardowe wej¶cie.
Format komunikatów od sêdziego i botów powinien byæ wyspecyfikowany dla ka¿dej gry, przy czym powinien on
byæ zgodny z poni¿szym protoko³em:\\
\begin{itemize}
    \item Bot wysy³a komunikaty TYLKO do sêdziego (za po¶rednictwem Nadzorcy)
    \item Ka¿dy komunikat od Sêdziego musi byæ potwierdzony komunikatem zwrotnym od Bota.
    \item Komunikaty wysy³ane przez sêdziego maj± nastêpuj±cy format: zaczynaj± siê od nawiasów kwadratowych,
          w ktorych znajduje siê lista garczy oddzielona przecinkami. Nastêpnie znajduje siê wiadomo¶æ,
          która zostanie przekazana odpowiednim botom. Komunikat musi koñczy siê ci±giem '<<<' i znakiem
          nowej linii, n.p: '[1,2,3,4,5]INIT<<<newline'.
    \item Sêdzia otrzymuje komunikaty zwrotne od botów w takiej kolejno¶ci w jakiej zostali wylistowani.
    \item Zak³ada siê ¿e ci±g '<<<newline' koñczy komunikat. Wys³anie komunikatu o nieprawid³owym formacie skutkuje zakoñczeniem rozgrywki.
    \item Komunikaty od nadzorcy do botów i do sêdziego równie¿ koñcz± siê ci±giem znaków '<<<newline'.
          Dziêki temu mo¿na przesy³aæ komunikaty wielowierszowe.
    \item Je¶li Sêdzia chce wys³aæ komunikat do wszystkich mo¿e zacz±æ ALBO od wylistowania wszystkich graczy,
          ALBO u¿yæ skrótu notacyjnego: '[0]' - to jeszcze nie dzia³a, kewstia dopisania jednego if'a
    \item Ponadto, je¶li Sêdzia stwierdzi³, ¿e gra siê zakoñczy³a i chce poinformowaæ wszystkich o tym,
          ¿e nast±pi³ koniec gry wysy³a do Nadzorcy komunikat o tre¶ci "[0]END<<<newline".
          Nastêpnie powinien wys³aæ komunikat zawieraj±cy punktacjê dla wszystkich graczy w postaci: '[score1, score2, ... ]<<<newline'.
    \item Je¶li sêdzia chce zakoñczyæ dzia³anie którego¶ z graczy nale¿y wys³aæ do niego wiadomo¶æ KILL (np. "[4]KILL<<<newline").
          Mo¿na te¿ w ten sposób zabiæ wiêksz± liczbê graczy lub nawet wszystkich ("[0]KILL<<<newline")
    \item Je¶li sêdzia wy¶le komunikat do bota który odszed³ w pokoju, dostanie komunikat zwrotny '\_DEAD\_<<<newline'.
          Boty powinny unikaæ wysy³ania tego komunikatu, gdy¿ mog± zostaæ uznane za martwe.
\end{itemize}


\section{Scheduler}
Warstwa schedulera ³±czy czê¶æ webow± serwisu z nadzorc±. W ten sposób obie czê¶ci funkcjonuj± niezale¿nie
i mog± byæ u¿ywane jako osobne produkty. Scheduler jest kolejk± zadañ, w której trzymane s± zlecenia
rozegrania meczy. Zlecenia te s± przekazywane nadzorcy, a nastêpnie wyniki rozgrywek zwracane przez
nadzorcê s± zapisywane w bazie.
Do realizacji warstwy nadzorcy u¿ywany jest program Gearmand0.26.

\section{Serwis webowy}
U¿ytkownik komunikuje siê z systemem poprzez interfejs webowy, zaimplementowany w Django.
Interfejs udostêpnie nastêpuj±ce akcje:
\begin{itemize}
    \item Za³o¿enie konta
    \item Dodanie nowej gry do serwisu
    \item Wys³anie w³asnego programu walcz±cego w wybran± grê dostêpn± w serwisie
    \item Uruchomienie testowego meczu, miêdzy w³asnym programem, a innym wybranym programem,
          zg³oszonym do tej samej gry.
    \item Zg³oszenie programu walcz±cego do konkursu, gdzie bêdzie on rywalizowa³ z pozosta³ymi
          zg³oszonymi programami.
    \item Przegl±danie zapisów rozgrywek.
    \item Przegl±danie aktualnego rankingu konkursu.
    \item Zapoznanie siê z zasadami wybranego konkursu/gry
    \item Obejrzenie kodu ¼ród³owego programu sêdziego, dla danej gry.
\end{itemize}

\section{Baza danych}
Za obs³ugê bazy danych odpowiedzialny jest framework Django. Domy¶ln± baz±, na której dzia³a serwis
jest PostgreSQL, ale nie jest to wymagane.

\chapter{Dokumentacja uzytkowa i opis implementacji}

\section{Scenariusze u¿ycia systemu}
\begin{figure}[h]
	\begin{center}
		\resizebox{!}{22cm}{
			\includegraphics[angle=90]{UseCaseDiagram.jpg}
		}
		\caption{Diagram przypadków u¿ycia}
	\end{center}
\end{figure}

\subsection{\Large{Z udzia³em u¿ytkownika niezalogowanego (Go¶cia)}} 

\subsection{\Large{Z udzia³em u¿ytkownika zalogowanego}}

\subsection{\Large{Z udzia³em moderatora konkursu lub gry}}

\chapter{Podsumowanie}

\chapter{Podzia{\l} prac}

\chapter{Spis p{\l}yty}

\appendix

\chapter{Przykladowa gra}

\chapter{Przykladowe programy}

\chapter{Przebieg przykladowego turnieju}

\begin{thebibliography}{99}
\addcontentsline{toc}{chapter}{Bibliografia}
\end{thebibliography}

\end{document}
